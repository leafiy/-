##离线与应用与客户端存储

###离线检测

- `navigator.onLine` 单独使用不能确定网络是否联通
- `online` `offline` 事件，在 `window` 对象上触发

###应用缓存

- 使用描述文件 `mainfest file` 在离线缓存中保存数据，描述文件中列出的都是需要下载以备离线时使用的文件

```html
<html mainfest='/offline.mainfest'></html>
```

- 使用 `applicationCache.update()` 更新描述文件
- 更新后使用 `applicationCache.swapCache()` 启用新的缓存

```js
EventUtil.addHandler(applicationCache,'updateready',function(){
	applicationCache.swapCache();
})
```

###数据储存

####Cookie

#####限制

- cookie在性质上是绑定在特定的域名下的。当设定了一个cookie后，再给创建它的域名发送请求时，都会包含这个cookie。这个限制确保了储存在cookie中的信息只能让批准的接受者访问，而无法被其他域访问

#####cookie的构成

- 名称：一个唯一确定cookie的名称
- 值：储存在cookie中的字符串值。值必须被URL编码
- 域：cookie对于哪个域是有效的。所有向该域发送的请求中都会包含这个cookie信息
- 路径：对于指定域中的那个路径，应该向服务器发送cookie。例如，你可以指定cookie只有从http://www.wrox.com/books/中才能访问，那么http://www.wrox.com的页面就不会发送cookie信息，即使请求都是来自同一个域的
- 失效时间：表示cookie何时应该被删除的时间戳，GMT格式的日期（Wdy, DD-Mon-YYYY HH:MM:SS GMT）
- 安全标志：指定后，cookie只有在使用SSL连接的时候才发送到服务器。例如，cookie信息只能发送给https://www.wrox.com，而http://www.wrox.com的请求则不能发送cookie

#####js中的cookie

- `document.cookie` 必须使用 `decodeURIComponent()` 解码

```js
document.cookie = encodeURIComponent('name')+'='+encodeURIComponent('shabi');
```


#####子cookie

- 放在单个cookie中的更小段的数据 `name=name1=value&name2=value2`


###localStorage

```js
lcoalStorage.setIten('name', 'shabi');
localStorage.book = 'book name';
var name = localStorage.getItem('name');
var book = localStorage.book;
```